"use strict";function noinput(){$($("#note")[0]).removeClass("hiden"),$($(".search-hot")[0]).removeClass("hiden"),$($("#history-item")[0]).removeClass("hiden"),$($("#search-content")[0]).addClass("hiden"),$($("#icon-empty")[0]).addClass("hiden"),$($("#search-result")[0]).addClass("hiden")}function input(){$($("#note")[0]).addClass("hiden"),$($(".search-hot")[0]).addClass("hiden"),$($("#history-item")[0]).addClass("hiden"),$($("#search-content")[0]).removeClass("hiden"),$($("#icon-empty")[0]).removeClass("hiden"),$($("#search-result")[0]).removeClass("hiden");var e=$($("#search")[0]).val().trim();$($("#search-content")[0]).empty();var n="\n    <p>搜索“"+e+"”</p>\n    <h5>搜索结果</h5>\n    ";$($("#search-content")[0]).append(n),search(e)}function search(e){if($($("#search-result")[0]).empty(),""===e);else{var n=new AV.Query("Song");n.contains("author",e);var a=new AV.Query("Song");a.contains("name",e),AV.Query.or(n,a).find().then(function(e){for(var n=0;n<e.length;n++){var a=e[n].attributes,t='\n                <a href="./playing.html" data-id="'+e[n].id+'">\n                <div class="a">\n                    <div class="name">\n                        <p>'+a.name+'</p>\n                    </div>\n                    <div class="author sq">'+a.author+" - "+a.album+'</div>\n                    <div class="icon-play"></div>\n                </div>\n            </a>\n                ';$("#search-result").append(t)}})}}function addId(e){var n=i,t=new AV.Query("Song");t.contains("name",e),t.find().then(function(e){var t=e[0].id;a[n].setAttribute("href","./playing.html?"+t)})}$("ol#tabs").on("click","li",function(e){var n=$(e.currentTarget);n.addClass("active").siblings().removeClass("active");var a=n.index();$("#tabs-content").children().eq(a).addClass("active").siblings().removeClass("active")}),$(".search-history").on("click",".icon-delete",function(e){$(e.currentTarget).parent().remove()}),$("#icon-empty").on("click",function(e){$("#search")[0].value="",noinput()}),$("#search-hot").on("click","li",function(e){$("#search")[0].value=e.currentTarget.innerText,input()});var timer=null;$("#search").on("input",function(e){timer&&window.clearTimeout(timer),timer=setTimeout(function(){var n=$(e.currentTarget).val().trim();input(),""===n&&noinput(),setTimeout(function(){if(""===$("#search-result")[0].innerHTML){$("#search-result").append("<h6>没有结果<h6>")}},200)},300)}),$("#search-history li").on("click","div",function(e){$("#search")[0].value=e.currentTarget.innerText,input()});var a=$(".list a"),i=0;for(i=0;i<a.length;i++){var regex=/([A-Z].*|[\u4e00-\u9fa5].*)/,matches=a[i].innerText.match(regex)[0],name=matches.split("(")[0].trim();addId(name)}